importScripts("LZWEncoder.js","NeuQuant.js","GIFEncoder.js"),self.onmessage=function(a){var e,t,s,d,r,i;e=a.data.frame_index,t=a.data.frame_length,s=a.data.height,d=a.data.width,i=a.data.imageData,r=a.data.delay;var n=new GIFEncoder;n.setRepeat(0),n.setQuality(1),n.setSize(d,s),n.setDelay(r),0==e?n.start():(n.cont(),n.setProperties(!0,!1)),n.addFrame(i,!0),t==e&&n.finish(),self.postMessage({frame_index:e,frame_data:n.stream().getData()})};